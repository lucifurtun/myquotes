(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{119:function(e,t,a){e.exports=a(201)},128:function(e,t,a){},130:function(e,t,a){},201:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),o=a(13),s=a.n(o),l=(a(128),a(27)),i=a(28),u=a(30),p=a(29),d=a(31),h=(a(130),a(24)),v=a(7),m=a(117),b=a(60),f=a(38),E={vdcc:"VDCC",kjv:"KJV"},g={vdcc__1:{id:"vdcc__1",name:"vdcc",index:1,label:"VDCC"}};function O(e){return{type:"ADD_VERSION",payload:e}}var y=a(204),j=a(203);var k=Object(h.a)(function(e){return{versions:Object(v.values)(e.versions).map(function(e){return{value:e,label:e}})}})(function(e){e.versions;var t=e.dispatch;return r.a.createElement("div",null,r.a.createElement(y.a,{bsStyle:"success",title:"Add Version",id:"add-version-dropdown"},r.a.createElement(j.a,{header:!0},r.a.createElement("span",{className:"flag-icon flag-icon-ro"})," Romanian"),r.a.createElement(j.a,{onClick:function(){return t(O("vdcc"))},eventKey:"1"},"VDCC"),r.a.createElement(j.a,{header:!0},r.a.createElement("span",{className:"flag-icon flag-icon-us"})," English"),r.a.createElement(j.a,{onClick:function(){return t(O("kjv"))},eventKey:"2"},"KJV")))}),x=a(16),w=a.n(x),_=a(15),S={data:[],count:null};var N=a(75),C={data:[],count:null};function R(e){return{type:"GET_VERSES",payload:{request:{url:"/verses/",params:{book_title:e,chapter_number:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,search:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,page:arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,page_size:100}}}}}var V=w.a.mark(G),I=w.a.mark(H),T=w.a.mark(L),A=w.a.mark(K),M=w.a.mark(B),D={book:null,chapter:null,verse:null,search:null};function G(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.d)("VERSE_SEARCH",K);case 2:return e.next=4,Object(_.d)("FORM_CHANGE",B);case 4:case"end":return e.stop()}},V,this)}function H(e){var t,a;return w.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.book,a=e.search,!t){n.next=6;break}return n.next=4,Object(_.b)({type:"GET_CHAPTERS",payload:{request:{url:"/chapters/",params:{book_title:t,page_size:1e3}}}});case 4:n.next=8;break;case 6:return n.next=8,Object(_.b)(U("chapter",null));case 8:return n.next=10,Object(_.b)(R(t,null,a));case 10:case"end":return n.stop()}},I,this)}function L(e){var t,a,n;return w.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.book,a=e.chapter,n=e.search,r.next=3,Object(_.b)(R(t,a,n));case 3:case"end":return r.stop()}},T,this)}function K(){var e,t,a,n;return w.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(_.c)(function(e){return e.filters});case 2:return e=r.sent,t=e.book,a=e.chapter,n=e.search,r.next=6,Object(_.b)(R(t,a,n,null));case 6:case"end":return r.stop()}},A,this)}function B(e){var t;return w.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(_.c)(function(e){return e.filters});case 2:t=a.sent,a.t0=e.payload.field,a.next="book"===a.t0?6:"chapter"===a.t0?9:12;break;case 6:return a.next=8,H(t);case 8:return a.abrupt("break",13);case 9:return a.next=11,L(t);case 11:case 12:return a.abrupt("break",13);case 13:case"end":return a.stop()}},M,this)}var U=function(e,t){return{type:"FORM_CHANGE",payload:{field:e,value:t}}},W=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).handleKeyPress=function(e){"Enter"===e.key&&a.search()},a.search=function(){(0,a.props.onSearch)(a.textInput.current.value)},a.textInput=r.a.createRef(),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",onKeyPress:this.handleKeyPress,className:"form-control",placeholder:"Search...",style:{height:"38px"},ref:this.textInput,onChange:function(){return e.props.dispatch(U("search",e.textInput.current.value||null))}}),r.a.createElement("span",{className:"input-group-btn"},r.a.createElement("button",{onClick:this.search,className:"btn btn-default",style:{height:"38px"},type:"button"},"Go!")))}}]),t}(n.Component),P=Object(c.b)()(W),q=a(118),J=Object(c.b)()(function(e){var t=e.name,a=e.options,n=e.placeholder,c=e.value,o=e.dispatch,s=c?{value:c,label:c}:null;return r.a.createElement(q.a,{isClearable:!0,options:a,value:s,placeholder:n,onChange:function(e){return o(U(t,e?e.value:null))}})});var z=Object(h.a)(function(e,t){var a=Object(v.values)(e.books.data).map(function(e){return{value:e.title,label:e.title}}),n=Object(v.values)(e.chapters.data).map(function(e){return{value:e.number,label:e.number}}),r=e.filters.book;return{books:a,book:r,chapters:r?n:[],chapter:e.filters.chapter}})(function(e){var t=e.handleSubmit,a=e.books,n=e.book,c=e.chapters,o=e.chapter,s=e.dispatch;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-3",style:{margin:"5px"}},r.a.createElement(J,{name:"book",placeholder:"Book",options:a,value:n})),r.a.createElement("div",{className:"col-sm-3",style:{margin:"5px"}},r.a.createElement(J,{name:"chapter",placeholder:"Chapter",options:c,value:o})),r.a.createElement("div",{className:"col-sm-3",style:{margin:"5px"}},r.a.createElement(P,{onSearch:function(e){return s({type:"VERSE_SEARCH",payload:e})}}))))}),F=function(e){var t=e.number,a=e.text;return r.a.createElement("div",{className:"verse"},r.a.createElement("span",{className:"verse-number",style:{marginRight:"2px"}},t,"."),r.a.createElement("span",{className:"verse-text",dangerouslySetInnerHTML:function(e){return{__html:e}}(a)}))};var $=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).handleScroll=function(e){var t=a.verseWrapper.current,n=t.scrollTop;t.offsetHeight+n===t.scrollHeight&&a.loadData()},a.verseWrapper=r.a.createRef(),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"loadData",value:function(){var e=this.props,t=e.dispatch,a=e.filters,n=e.page;e.hasMore&&t(R(a.book,a.chapter,a.search,n?n+1:n))}},{key:"render",value:function(){return r.a.createElement("div",{ref:this.verseWrapper,className:"verses-wrapper",onScroll:this.handleScroll},this.props.verses.map(function(e,t,a){return r.a.createElement("div",{key:t},function(e,t,a){var n=a[t-1];return!!Object(v.isUndefined)(n)||n.book_title!==e.book_title}(e,t,a)&&r.a.createElement("h2",null,e.book_title),function(e,t,a){var n=a[t-1];return!!Object(v.isUndefined)(n)||n.chapter_number!==e.chapter_number}(e,t,a)&&r.a.createElement("h3",null,e.chapter_number),r.a.createElement(F,{key:t,number:e.number,text:e.text_highlight?e.text_highlight:e.text}))}),!this.props.verses.length&&r.a.createElement("h4",{className:"no-results"},"No results..."))}}]),t}(n.Component);var Q=Object(c.b)(function(e){return{verses:e.verses.data,page:e.verses.page,hasMore:e.verses.hasMore,filters:e.filters}})($),X=a(45),Y=a(22),Z=a(74),ee=a(115),te=a.n(ee),ae=a(73),ne=a.n(ae),re={data:[],count:null};var ce={isLoading:!1,isVisible:!1};var oe={},se=w.a.mark(le);function le(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.a)([G()]);case 2:case"end":return e.stop()}},se,this)}var ie=Object(Y.c)({versions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"ADD_VERSION":var a,n,r=t.payload,c=[],o=!0,s=!1,l=void 0;try{for(var i,u=Object(v.keys)(e)[Symbol.iterator]();!(o=(i=u.next()).done);o=!0){var p=i.value,d=Object(v.split)(p,"__"),h=Object(m.a)(d,2);a=h[0],n=h[1],a===r&&c.push(Object(v.toInteger)(n))}}catch(k){s=!0,l=k}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}var O=Object(v.isEmpty)(c)?1:Object(v.max)(c)+1,y="".concat(r,"__").concat(O);console.log(y);var j=Object(f.a)({},y,{id:y,name:r,index:O,label:E[r]});return Object(b.a)({},e,j);case"REMOVE_VERSION":return console.log(t.payload),Object(v.omit)(e,t.payload);default:return e}},api:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(v.has)(t.payload,"request")?Object(v.has)(t.payload,"status")?{isLoading:!1}:{isLoading:!0}:Object(v.has)(t,"error")?{isLoading:!1}:e}}),ue=Object(Y.c)({books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"GET_BOOKS_SUCCESS":return{data:t.payload.data.results,count:t.payload.data.count};default:return e}},chapters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"GET_CHAPTERS_SUCCESS":return{data:t.payload.data.results,count:t.payload.data.count};default:return e}},verses:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"GET_VERSES_SUCCESS":var a=t.payload.data;return{data:function(e){return 1===e.page}(a)?a.results:Object(N.a)(e.data).concat(Object(N.a)(a.results)),count:a.count,page:a.page,hasMore:a.has_more};default:return e}},filters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"FORM_CHANGE":return Object(b.a)({},e,Object(f.a)({},t.payload.field,t.payload.value));default:return e}}}),pe=te.a.create({baseURL:"/api",responseType:"json"});var de=function(e){function t(e){var a;Object(l.a)(this,t);var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object(Z.a)(),n=Object(Y.d)(ue,t,Object(Y.a)(ne()(pe),a));return a.run(le),oe[e]=n,n.subscribe(function(){console.log(e,n.getState())}),n}((a=Object(u.a)(this,Object(p.a)(t).call(this,e))).props.item.id);return n.dispatch({type:"GET_BOOKS",payload:{request:{url:"/books/",params:{page_size:1e3}}}}),n.dispatch(R()),a.store=n,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(X.a,{store:this.store},r.a.createElement("div",null,r.a.createElement(z,null),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return oe.root.dispatch({type:"REMOVE_VERSION",payload:e.props.item.id})}},r.a.createElement("span",{className:"glyphicon glyphicon-remove","aria-hidden":"true"})),r.a.createElement(Q,null)))}}]),t}(n.Component);var he=Object(h.a)(function(e){return{versions:Object(v.values)(e.versions)}})(function(e){var t=e.versions,a=Object(v.toInteger)(12/t.length);return r.a.createElement("div",{style:{marginTop:"20px"}},r.a.createElement(k,null),r.a.createElement("div",{className:"translation-wrapper"},t.map(function(e,t){return r.a.createElement("div",{key:t,className:"translation col-lg-"+a},r.a.createElement(de,{key:t,item:e}))})))}),ve=function(e){return e.show?r.a.createElement("div",{className:"spinner"},r.a.createElement("svg",{width:"30px",height:"30px",viewBox:"0 0 66 66",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("circle",{fill:"none",strokeWidth:"5",strokeLinecap:"round",cx:"33",cy:"33",r:"30",className:"circle"}))):null},me=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){setTimeout(function(){return document.getElementById("loader").style.display="none"},250)}},{key:"render",value:function(){return r.a.createElement("div",{id:"page-wrapper"},r.a.createElement("div",{className:"row page-header-row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("h2",{className:"page-header"},"Bible"),r.a.createElement(ve,{show:this.props.isLoading}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{id:"content-wrapper"},r.a.createElement("div",{className:"App"},r.a.createElement(he,null)))))}}]),t}(n.Component);var be=Object(c.b)(function(e){return{isLoading:e.api.isLoading}})(me);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(Z.a)(),a=Object(Y.d)(ie,e,Object(Y.a)(ne()(pe),t));return t.run(le),oe.root=a,a.subscribe(function(){console.log("root",a.getState())}),a}();s.a.render(r.a.createElement(c.a,{store:fe},r.a.createElement(be,{store:fe})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[119,2,1]]]);
//# sourceMappingURL=main.3ecc8d0c.chunk.js.map
{% extends 'layouts/default.html' %}
{% load static %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
    <div id="loader"></div>

    <div id="quotes-list" class="row" ng-controller="filterController"
         ng-init="init(0, {{ request.user.id }})">

        <div id="filtered-content">
            {% verbatim %}
            <div cg-busy="{promise:req.$promise, message:'Loading', minDuration:300}">
                <div class="grid" masonry-grid>
                    <div class="list-group grid-item" masonry-item ng-repeat="quote in quotes">
                        <div class="list-group-item">
                            <h4 class="list-group-item-heading">{{ quote.title }}</h4>
                            <p class="list-group-item-text" ng-bind-html="quote.text | unsafe"></p>
                            <div class="author label label-danger">{{ quote.author.name }}</div>
                        </div>
                    </div>
                </div>
                <div ng-if="quotes.length == 0" class="alert alert-warning" role="alert">
                    There are no quotes!
                </div>
            </div>

            {% endverbatim %}
        </div>
    </div>
{% endblock %}

{% block css %}
    {{ block.super }}
    <link href="{% get_static_prefix %}angular-busy/dist/angular-busy.css" rel="stylesheet" type="text/css">
    <link href="{% get_static_prefix %}css/quote.css" rel="stylesheet"/>
{% endblock %}

{% block js %}
    {{ block.super }}
    <script src="{% get_static_prefix %}angular-busy/dist/angular-busy.js"></script>
    <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>

    <script type="text/javascript">
        $(window).load(function () {
            setTimeout(function () {
                $("#loader").fadeOut("slow");
            }, 250)
        })
    </script>

{% endblock %}

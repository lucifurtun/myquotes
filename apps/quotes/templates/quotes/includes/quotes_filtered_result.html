{% load widget_tweaks %}
{% verbatim %}

<div cg-busy="{promise:req.$promise, message:'Loading', minDuration:300}">
    <div class="list-group" ng-repeat="quote in quotes">
        <div class="list-group-item">
            <span class="quote-actions" ng-if="!readOnly">
                <a href="" id="edit-button" class="visible-on-hover" ng-click="setEditItem(quote.id)">
                    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                </a>
                <a href="" id="delete-button" class="visible-on-hover"
                   ng-click="setDeleteItem(quote.id, quote.title)">
                    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                </a>
            </span>
            <h4 class="list-group-item-heading">{{ quote.title }}</h4>
            <p class="list-group-item-text" ng-bind-html="quote.text | unsafe"></p>
            <div class="author label label-danger">{{ quote.author.name }}</div>
        </div>
    </div>
    <div ng-if="quotes.length == 0" class="alert alert-warning" role="alert">
        There are no quotes!
    </div>
</div>
<div class="pagination-wrapper">
    <ul class="pagination">
        <li ng-if="pages.previous">
            <a href="" ng-click="updatePage('previous')">
                <span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span>
            </a>
        </li>
        <li ng-if="pages.next">
            <a href="" ng-click="updatePage('next')">
                <span class="glyphicon glyphicon-arrow-right" aria-hidden="true"></span>
            </a>
        </li>
    </ul>
</div>

<div class="modal fade" id="deleteQuoteModal" tabindex="-1" role="dialog" aria-labelledby="deleteQuoteModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="deleteQuoteModalLabel">Delete Quote</h4>
            </div>
            <div class="modal-body">
                Are you sure you want to delete <strong>{{ deleteItem.title }}</strong> ?
            </div>
            <div class="modal-footer">
                <button class="btn btn-default" data-dismiss="modal">Close</button>
                <button class="btn btn-danger" ng-click="deleteQuote(deleteItem.id)">Delete</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="editQuoteModal" role="dialog" aria-labelledby="editQuoteModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="editQuoteModalLabel">Quote</h4>
            </div>
            <div class="modal-body">
                <form method="post" id="quote-form">
                    <div id="title" class="form-group">
                        <div class="form-inline">
                            <label for="id_title">Title:</label>
                            <input type="text" name="title" maxlength="400" ng-model="quoteData.title"
                                   class="form-control " id="id_title">

                            <div class="material-switch pull-right">
                                <input id="id_private" type="checkbox"
                                       ng-model="quoteData.private"
                                       ng-checked="quoteData.private"/>
                                <label for="id_private" class="label-success switch-label"></label>
                                <label for="id_private">Private</label>
                            </div>
                        </div>
                        <div id="errors" class="text-danger small" ng-bind="quoteDataErrors.title"></div>

                    </div>
                    <div id="authors" class="form-group">
                        <div class="form-inline">
                            <label for="id_author">Author:</label>

                            <select name="author" id="id_author"
                                    select2="{data: 'authors', type: 'manual', ajax: '/api/authors/'}">
                                <option value="" selected="">---------</option>
                                <option ng-repeat="item in options.authors" ng-value="item.name">{{ item.name }}
                                </option>
                            </select>
                            <input ng-model="quoteData.author" style="display: none">

                            <label for="id_categories">Category:</label>
                            <select name="category" id="id_category"
                                    select2="{data: 'categories', type: 'manual'}">
                                <option value="" selected="">---------</option>
                                <option ng-repeat="item in options.categories" ng-value="item.name">{{ item.name }}
                                </option>
                            </select>
                            <input ng-model="quoteData.category" style="display: none">
                        </div>
                    </div>
                    <div id="source" class="form-group">
                        <div class="form-inline">
                            <label for="id_source">Source:</label>
                            <input type="text" name="source" maxlength="200" ng-model="quoteData.source"
                                   placeholder="book/video/article" class="form-control" id="id_source">
                            <label for="id_reference">Reference:</label>
                            <input type="text" name="reference" maxlength="100" ng-model="quoteData.reference"
                                   placeholder="page/minute" class="form-control" id="id_reference">
                        </div>
                    </div>
                    <div id="tags" class="form-group">
                        <div class="form-inline">
                            <label for="id_tags">Tags:</label>

                            <select id="id_tags"
                                    ng-model="quoteData.tags" name="tags" multiple
                                    select2="{data: 'tags', type: 'auto'}">
                                <option ng-repeat="item in options.tags" ng-value="item.name">{{ item.name }}</option>
                            </select>

                        </div>
                    </div>
                    <div id="text" class="form-group">
                        <label for="id_text">Text:</label>
                        <textarea id="id_text" ng-model="quoteData.text" ckeditor rows="1"></textarea>
                        <div id="errors" class="text-danger small" ng-bind="quoteDataErrors.text"></div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-default" data-dismiss="modal">Close</button>
                <button class="btn btn-success" ng-click="editQuote(item)">Save</button>
            </div>
        </div>
    </div>
</div>
{% endverbatim %}
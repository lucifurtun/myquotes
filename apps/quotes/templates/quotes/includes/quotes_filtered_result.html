{% load widget_tweaks %}
{% verbatim %}

<div cg-busy="{promise:req.$promise, message:'Loading', minDuration:300}">
    <div class="list-group" ng-repeat="quote in quotes">
        <div class="list-group-item">
            <span class="quote-actions" ng-if="!user_id">
                <a href="/quote/{{ quote.id }}/" id="edit-button" class="visible-on-hover">
                    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                </a>
                <a href="" id="delete-button" class="visible-on-hover"
                   ng-click="setDeleteItem(quote.id, quote.title)">
                    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                </a>
            </span>
            <h4 class="list-group-item-heading">{{ quote.title }}</h4>
            <p class="list-group-item-text" ng-bind-html="quote.text | unsafe"></p>
            <div class="author label label-danger">{{ quote.author.name }}</div>
        </div>
    </div>
    <div ng-if="quotes.length == 0" class="alert alert-warning" role="alert">
        There are no quotes!
    </div>
</div>
<div class="pagination-wrapper">
    <ul class="pagination">
        <li ng-if="pages.previous">
            <a href="" ng-click="updatePage('previous')">
                <span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span>
            </a>
        </li>
        <li ng-if="pages.next">
            <a href="" ng-click="updatePage('next')">
                <span class="glyphicon glyphicon-arrow-right" aria-hidden="true"></span>
            </a>
        </li>
    </ul>
</div>

<div class="modal fade" id="deleteQuoteModal" tabindex="-1" role="dialog" aria-labelledby="deleteQuoteModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="deleteQuoteModalLabel">Delete Quote</h4>
            </div>
            <div class="modal-body">
                Are you sure you want to delete <strong>{{ deleteItem.title }}</strong> ?
            </div>
            <div class="modal-footer">
                <button class="btn btn-default" data-dismiss="modal">Close</button>
                <button class="btn btn-danger" ng-click="deleteQuote(deleteItem.id)">Delete</button>
            </div>
        </div>
    </div>
</div>

{% endverbatim %}

<div class="modal fade" id="editQuoteModal" role="dialog" aria-labelledby="editQuoteModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="editQuoteModalLabel">Quote</h4>
            </div>
            <div class="modal-body">
                <form method="post" id="quote-form">
                    <div id="title" class="form-group">
                        <div class="form-inline">
                            <label for="{{ form.title.id_for_label }}">{{ form.title.label }}:</label>
                            {{ form.title|add_class:"form-control" }}
                        </div>
                        <div id="errors" class="text-danger small" ng-bind="quoteDataErrors.title"></div>
                    </div>
                    <div id="authors" class="form-group">
                        <div class="form-inline">
                            <label for="{{ form.author.id_for_label }}">{{ form.author.label }}:</label>
                            {{ form.author|attr:"select2:authors" }}
                            <label for="{{ form.category.id_for_label }}">{{ form.category.label }}:</label>
                            {{ form.category|attr:"select2:categories, ng-model:qouteData.category" }}
                        </div>
                    </div>
                    <div id="source" class="form-group">
                        <div class="form-inline">
                            <label for="{{ form.source.id_for_label }}">{{ form.source.label }}:</label>
                            {{ form.source|add_class:"form-control"|attr:"placeholder:book/video/article" }}
                            <label for="{{ form.reference.id_for_label }}">{{ form.reference.label }}:</label>
                            {{ form.reference|add_class:"form-control"|attr:"placeholder:page/minute" }}
                        </div>
                    </div>
                    <div id="tags" class="form-group">
                        <div class="form-inline">
                            <label for="{{ form.tags.id_for_label }}">{{ form.tags.label }}:</label>
                            {{ form.tags|attr:"select2:tags" }}
                        </div>
                    </div>
                    <div id="text" class="form-group">
                        <label for="{{ form.text.id_for_label }}">{{ form.text.label }}:</label>
                        {{ form.text|attr:"rows:3" }}
                        <div id="errors" class="text-danger small" ng-bind="quoteDataErrors.text"></div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-default" data-dismiss="modal">Close</button>
                <button class="btn btn-success" ng-click="editQuote(item)">Save</button>
            </div>
        </div>
    </div>
</div>
